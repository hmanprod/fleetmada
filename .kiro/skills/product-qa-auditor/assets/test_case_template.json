{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "QA Test Case Schema",
  "description": "Standardized schema for test cases generated by Product QA Auditor",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^TC-[A-Z]+-[0-9]{3}$",
      "description": "Unique test case identifier (e.g., TC-LOGIN-001)"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "description": "Clear description of what the test case validates"
    },
    "test_type": {
      "type": "string",
      "enum": ["functional", "ux", "integration", "e2e", "unit"],
      "description": "Type of test being performed"
    },
    "priority": {
      "type": "string",
      "enum": ["high", "medium", "low"],
      "description": "Priority level for test execution"
    },
    "preconditions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Required setup or state before test execution"
    },
    "steps": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "description": "Ordered list of test execution steps"
    },
    "expected_results": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "description": "Expected outcomes after test execution"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Categorization tags for test organization"
    },
    "estimated_duration": {
      "type": "string",
      "pattern": "^[0-9]+ (minutes?|hours?)$",
      "description": "Estimated time to execute test (e.g., '5 minutes')"
    },
    "automation_feasible": {
      "type": "boolean",
      "description": "Whether this test can be automated"
    },
    "created_date": {
      "type": "string",
      "format": "date-time",
      "description": "When the test case was created"
    },
    "created_by": {
      "type": "string",
      "default": "Product QA Auditor",
      "description": "Who or what created the test case"
    },
    "last_updated": {
      "type": "string",
      "format": "date-time",
      "description": "When the test case was last modified"
    },
    "execution_history": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "execution_date": {
            "type": "string",
            "format": "date-time"
          },
          "result": {
            "type": "string",
            "enum": ["pass", "fail", "blocked", "not_run"]
          },
          "notes": {
            "type": "string"
          },
          "executed_by": {
            "type": "string"
          }
        },
        "required": ["execution_date", "result"]
      },
      "description": "History of test executions"
    },
    "related_requirements": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "PRD requirements this test validates"
    },
    "related_issues": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "issue_id": {
            "type": "string"
          },
          "issue_type": {
            "type": "string",
            "enum": ["bug", "enhancement", "task"]
          },
          "description": {
            "type": "string"
          }
        },
        "required": ["issue_id", "issue_type"]
      },
      "description": "Related bugs or issues"
    }
  },
  "required": [
    "id",
    "description", 
    "test_type",
    "priority",
    "steps",
    "expected_results",
    "automation_feasible"
  ],
  "examples": [
    {
      "id": "TC-LOGIN-001",
      "description": "Verify successful user login with valid credentials",
      "test_type": "functional",
      "priority": "high",
      "preconditions": [
        "Navigate to login page",
        "Ensure user account exists in system"
      ],
      "steps": [
        "Enter valid email address",
        "Enter correct password",
        "Click Login button",
        "Verify successful login"
      ],
      "expected_results": [
        "User is successfully authenticated",
        "User is redirected to dashboard",
        "Welcome message is displayed"
      ],
      "tags": ["login", "authentication", "functional"],
      "estimated_duration": "3 minutes",
      "automation_feasible": true,
      "created_date": "2024-01-15T10:30:00Z",
      "created_by": "Product QA Auditor",
      "related_requirements": ["REQ-AUTH-001", "REQ-LOGIN-002"]
    },
    {
      "id": "TC-UX-001", 
      "description": "Verify form field labels are clearly visible and associated",
      "test_type": "ux",
      "priority": "medium",
      "preconditions": [
        "Navigate to registration form"
      ],
      "steps": [
        "Inspect all form fields",
        "Verify each field has a visible label",
        "Check label-field associations",
        "Test with screen reader if available"
      ],
      "expected_results": [
        "All form fields have clear labels",
        "Labels are properly associated with fields",
        "Screen readers can identify field purposes"
      ],
      "tags": ["ux", "accessibility", "forms"],
      "estimated_duration": "10 minutes",
      "automation_feasible": false,
      "created_date": "2024-01-15T10:35:00Z",
      "created_by": "Product QA Auditor",
      "related_requirements": ["REQ-UX-003", "REQ-A11Y-001"]
    }
  ]
}